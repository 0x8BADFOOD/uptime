<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Uptime by fzaninotto</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Uptime</h1>
        <p>A simple HTTP remote monitoring utility using Node.js and MongoDB.</p>

        <p class="view"><a href="https://github.com/fzaninotto/uptime">View the Project on GitHub <small>fzaninotto/uptime</small></a></p>


        <ul>
          <li><a href="https://github.com/fzaninotto/uptime/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/fzaninotto/uptime/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/fzaninotto/uptime">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>uptime</h1>

<p>A remote monitoring application using Node.js, MongoDB, and Twitter Bootstrap.</p>

<p><img src="https://raw.github.com/fzaninotto/uptime/downloads/check_details.png" title="Uptime screenshot"></p>

<p>You can watch a <a href="https://vimeo.com/39302164">demo screencast on Vimeo</a>.</p>

<h2>Features</h2>

<ul>
<li>Monitor thousands of websites (powered by <a href="http://dotheweb.posterous.com/nodejs-for-php-programmers-1-event-driven-pro">Node.js asynchronous programming</a>)</li>
<li>Tweak frequency of monitoring on a per-check basis, up to the second</li>
<li>Receive on screen notifications whenever a check goes down (powered by <a href="http://socket.io/">socket.io</a>)</li>
<li>Receive email notifications whenever a check goes down</li>
<li>Record availability statistics for further reporting (powered by <a href="http://www.mongodb.org/">MongoDB</a>)</li>
<li>Detailed uptime reports with animated charts (powered by <a href="http://www.humblesoftware.com/flotr2/">Flotr2</a>)</li>
<li>Monitor availability, responsiveness, average response time, and total uptime/downtime</li>
<li>Get details about failed checks (HTTP error code, etc.)</li>
<li>Group checks by tags and get reports by tag</li>
<li>Familiar web interface (powered by <a href="http://twitter.github.com/bootstrap/index.html">Twitter Bootstrap 2.0</a>)</li>
<li>Complete API for integration with third-party monitoring services</li>
<li>Easy installation and zero administration</li>
</ul><h2>Installing Uptime</h2>

<p>Uptime 3.0 requires Node.js 0.8 (if you're stuck with Node 0.6, try Uptime v1.4, available as a tag and on npm).</p>

<p>One line install:</p>

<pre><code>&gt; npm install node-uptime
</code></pre>

<p>Alternatively, clone the repository from GitHub and install dependencies using npm:</p>

<pre><code>&gt; git clone git://github.com/fzaninotto/uptime.git
&gt; npm install
</code></pre>

<p>Lastly, start the application with:</p>

<pre><code>&gt; node app.js
</code></pre>

<h2>Upgrading From a 2.0 Install</h2>

<p>If you have been using uptime 1.0 or 2.0, you have to execute the migration script before using the new release.</p>

<pre><code>&gt; node models/migrations/upgrade2to3
</code></pre>

<h2>Adding Checks</h2>

<p>By default, the web UI runs on port 8082, so just browse to </p>

<pre><code>http://localhost:8082/
</code></pre>

<p>And you're ready to begin. Create your first check by entering an URL, wait for the first ping, and you'll soon see data flowing through your charts!</p>

<h2>Configuring</h2>

<p>Uptime uses <a href="https://github.com/lorenwest/node-config">node-config</a> to allow YAML configuration and environment support. Here is the default configuration, taken from <code>config/default.yaml</code>:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">mongodb</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">localhost</span>
  <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">uptime</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">root</span> 
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">connectionString</span><span class="p-Indicator">:</span>       <span class="c1"># alternative to setting server, database, user and password separately</span>

<span class="l-Scalar-Plain">monitor</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span>                   <span class="l-Scalar-Plain">origin</span>
  <span class="l-Scalar-Plain">apiUrl</span><span class="p-Indicator">:</span>                 <span class="s">'http://localhost:8082/api'</span>
  <span class="l-Scalar-Plain">pollingInterval</span><span class="p-Indicator">:</span>        <span class="l-Scalar-Plain">10000</span>      <span class="c1"># ten seconds</span>
  <span class="l-Scalar-Plain">timeout</span><span class="p-Indicator">:</span>                <span class="l-Scalar-Plain">5000</span>       <span class="c1"># five seconds</span>
  <span class="l-Scalar-Plain">userAgent</span><span class="p-Indicator">:</span>              <span class="l-Scalar-Plain">NodeUptime/1.3 (https://github.com/fzaninotto/uptime)</span>

<span class="l-Scalar-Plain">analyzer</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">updateInterval</span><span class="p-Indicator">:</span>         <span class="l-Scalar-Plain">60000</span>      <span class="c1"># one minute</span>
  <span class="l-Scalar-Plain">qosAggregationInterval</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">600000</span>     <span class="c1"># ten minutes</span>
  <span class="l-Scalar-Plain">pingHistory</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">8035200000</span> <span class="c1"># three months</span>

<span class="l-Scalar-Plain">autoStartMonitor</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

<span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">8082</span>
</pre></div>

<p>To modify this configuration, create a <code>development.yaml</code> or a <code>production.yaml</code> file in the same directory, and override just the settings you need. For instance, to run Uptime on port 80 in production, create a <code>production.yaml</code> file as follows:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">80</span>
</pre></div>

<p>Node that Uptime works great behind a proxy - it uses the http_proxy environment variable transparently.</p>

<h2>Monitoring From Various Locations</h2>

<p>Heavily browsing the web dashboard may slow down the server - including the polling monitor. In other terms, using the application can influence the uptime measurements. To avoid this effect, it is recommended to run the polling monitor in a separate process.</p>

<p>To that extent, set the <code>autoStartMonitor</code> setting to <code>false</code> in the <code>production.yaml</code>, and launch the monitor by hand:</p>

<pre><code>&gt; node monitor.js &amp;
&gt; node app.js
</code></pre>

<p>You can also run the monitor in a different server. This second server must be able to reach the API of the dashboard server: set the <code>monitor.apiUrl</code> setting accordingly in the <code>production.yaml</code> file of the monitor server.</p>

<p>You can even run several monitor servers in several datacenters to get average response time. In that case, make sure you set a different <code>monitor.name</code> setting for all monitor servers to be able to tell which server make a particular ping.</p>

<h2>Using Plugins</h2>

<p>Uptime provides plugins that you can enable to add more functionality.</p>

<p>To enable plugins, create a <code>plugins/index.js</code> module. This module must offer a public <code>init()</code> method, where you will require and initialize plugin modules. For instance, to enable only the <code>console</code> plugin:</p>

<div class="highlight"><pre><span class="c1">// in plugins/index.js</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">require</span><span class="p">(</span><span class="s1">'./console'</span><span class="p">).</span><span class="nx">init</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<p>Currently supported plugins:</p>

<ul>
<li>
<code>console</code>: log pings and events in the console in real time</li>
<li>
<code>email</code>: notify events (up, down pause) by email</li>
</ul><p>You can customize plugins using the YAML configuration.</p>

<p>You can add your own plugins under the <code>plugins</code> directory. A plugin is simply a module with a public <code>init()</code> method. For instance, if you had to recreate a simple version of the <code>console</code> plugin, you could write it as follows:</p>

<div class="highlight"><pre><span class="c1">// in plugins/console/index.js</span>
<span class="kd">var</span> <span class="nx">CheckEvent</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../models/checkEvent'</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">CheckEvent</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'afterInsert'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">checkEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">checkEvent</span><span class="p">.</span><span class="nx">findCheck</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">check</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="o">+</span> <span class="nx">check</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="nx">checkEvent</span><span class="p">.</span><span class="nx">isGoDown</span> <span class="o">?</span> <span class="s1">' goes down'</span> <span class="o">:</span> <span class="s1">' goes back up'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>All Uptime entities emit lifecycle events that you can listen to on the Model class. These events are <code>beforeInsert</code>, <code>afterInsert</code>, <code>beforeUpdate</code>, <code>afterUpdate</code>, <code>beforeSave</code> (called for both inserts and updates), <code>afterSave</code> (called for both inserts and updates), <code>beforeRemove</code>, and <code>afterRemove</code>. For more information about these events, check the <a href="https://github.com/fzaninotto/mongoose-lifecycle">mongoose-lifecycle</a> plugin.</p>

<h2>Support and Discussion</h2>

<p>Join the <a href="https://groups.google.com/d/forum/node-uptime">node-uptime</a> Google Group to discuss features, bugs and use cases related to Uptime.</p>

<h2>License</h2>

<p>The Uptime code is free to use and distribute, under the <a href="https://raw.github.com/fzaninotto/uptime/master/LICENSE">MIT license</a>.</p>

<p>Uptime uses third-party libraries:</p>

<ul>
<li>
<a href="http://nodejs.org/">NodeJS</a>, licensed under the <a href="https://github.com/joyent/node/blob/master/LICENSE#L5-22">MIT License</a>,</li>
<li>
<a href="http://socket.io/">Socket.io</a>, licensed under the <a href="https://github.com/LearnBoost/socket.io/blob/master/Readme.md">MIT License</a>,</li>
<li>
<a href="http://mongoosejs.com/">MongooseJS</a>, licensed under the <a href="https://github.com/LearnBoost/mongoose/blob/master/README.md">MIT License</a>,</li>
<li>
<a href="http://jquery.com/">jQuery</a>, licensed under the <a href="http://jquery.org/license">MIT License</a>,</li>
<li>
<a href="http://twitter.github.com/bootstrap/">TwitterBootstrap</a>, licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License v2.0</a>,</li>
<li>
<a href="http://www.humblesoftware.com/flotr2/">Flotr2</a>, licensed under the <a href="https://github.com/HumbleSoftware/Flotr2/blob/master/LICENSE">MIT License</a>.</li>
<li>
<a href="http://www.alexpeattie.com/projects/justvector_icons/">Favicon</a>, distributed under the <a href="http://artlibre.org/licence/lal/en">Free Art License</a>.</li>
</ul><p>If you like the software, please help improving it by contributing PRs on the <a href="https://github.com/fzaninotto/uptime">GitHub project</a>!</p>

<h2>TODO</h2>

<ul>
<li>Account for scheduled maintenance (and provide two QoS calculations: with and without scheduled maintenance)</li>
<li>Allow for JavaScript execution in the monitored resources by using a headless browser (probably zombie.js)</li>
<li>Unit tests</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/fzaninotto">fzaninotto</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA–30862276–1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>